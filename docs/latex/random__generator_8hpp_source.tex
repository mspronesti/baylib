\hypertarget{random__generator_8hpp_source}{}\doxysection{random\+\_\+generator.\+hpp}
\label{random__generator_8hpp_source}\index{/home/mspronesti/Desktop/baylib/baylib/tools/random/random\_generator.hpp@{/home/mspronesti/Desktop/baylib/baylib/tools/random/random\_generator.hpp}}
\mbox{\hyperlink{random__generator_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{//}}
\DoxyCodeLine{2 \textcolor{comment}{// Created by paolo on 31/08/21.}}
\DoxyCodeLine{3 \textcolor{comment}{//}}
\DoxyCodeLine{4 }
\DoxyCodeLine{5 \textcolor{preprocessor}{\#ifndef BAYLIB\_RANDOM\_GENERATOR\_HPP}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#define BAYLIB\_RANDOM\_GENERATOR\_HPP}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{preprocessor}{\#define AVALANCHE\_FACTOR 0x45D9F3B }\textcolor{comment}{// from papers and experiments}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include <random>}}
\DoxyCodeLine{10 }
\DoxyCodeLine{17 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacebn}{bn}} \{}
\DoxyCodeLine{27     \textcolor{keyword}{template}<\textcolor{keyword}{typename} Tp\_, \textcolor{keyword}{typename} Generator\_ = std::mt19937>}
\DoxyCodeLine{28     \textcolor{keyword}{class }\mbox{\hyperlink{classbn_1_1random__generator}{random\_generator}} \{}
\DoxyCodeLine{29         \textcolor{keyword}{using} dist\_type = \textcolor{keyword}{typename} std::conditional}
\DoxyCodeLine{30                 <}
\DoxyCodeLine{31                         std::is\_integral<Tp\_>::value}
\DoxyCodeLine{32                         , std::uniform\_int\_distribution<Tp\_>}
\DoxyCodeLine{33                         , std::uniform\_real\_distribution<Tp\_>}
\DoxyCodeLine{34                 >::type;}
\DoxyCodeLine{35     \textcolor{keyword}{public}:}
\DoxyCodeLine{36         \textcolor{keyword}{explicit} \mbox{\hyperlink{classbn_1_1random__generator}{random\_generator}}(uint seed = 0) : gen(prime(seed)) \{\}}
\DoxyCodeLine{37 }
\DoxyCodeLine{38         Tp\_ get\_random(Tp\_ from = .0, Tp\_ to = 1.) \{}
\DoxyCodeLine{39             dist\_type dist;}
\DoxyCodeLine{40             \textcolor{keywordflow}{return} dist(gen, \textcolor{keyword}{typename} dist\_type::param\_type\{from, to\});}
\DoxyCodeLine{41         \}}
\DoxyCodeLine{42 }
\DoxyCodeLine{43         Tp\_ operator () (Tp\_ from = 0., Tp\_ to = 1.) \{}
\DoxyCodeLine{44             \textcolor{keywordflow}{return} get\_random(from, to);}
\DoxyCodeLine{45         \}}
\DoxyCodeLine{46 }
\DoxyCodeLine{47     \textcolor{keyword}{private}:}
\DoxyCodeLine{48        uint prime(uint seed)}
\DoxyCodeLine{49        \{}
\DoxyCodeLine{50           seed = ((seed >> 16) \string^ seed) * AVALANCHE\_FACTOR;}
\DoxyCodeLine{51           seed = ((seed >> 16) \string^ seed) * AVALANCHE\_FACTOR;}
\DoxyCodeLine{52           seed = (seed >> 16) \string^ seed;}
\DoxyCodeLine{53           \textcolor{keywordflow}{return} seed;}
\DoxyCodeLine{54        \}}
\DoxyCodeLine{55 }
\DoxyCodeLine{56        Generator\_ gen;}
\DoxyCodeLine{57     \};}
\DoxyCodeLine{58 }
\DoxyCodeLine{59 }
\DoxyCodeLine{66     \textcolor{keyword}{class }\mbox{\hyperlink{classbn_1_1seed__factory}{seed\_factory}} \{}
\DoxyCodeLine{67     \textcolor{keyword}{private}:}
\DoxyCodeLine{68     \textcolor{keyword}{public}:}
\DoxyCodeLine{69         \textcolor{keyword}{explicit} \mbox{\hyperlink{classbn_1_1seed__factory}{seed\_factory}}(uint nseeds, uint seed = 0)}
\DoxyCodeLine{70         : next(0)}
\DoxyCodeLine{71         \{}
\DoxyCodeLine{72             std::seed\_seq seq\{seed\};}
\DoxyCodeLine{73             seeds = std::vector<uint>(nseeds);}
\DoxyCodeLine{74             seq.generate(seeds.begin(), seeds.end());}
\DoxyCodeLine{75         \}}
\DoxyCodeLine{76 }
\DoxyCodeLine{77         \mbox{\hyperlink{classbn_1_1seed__factory}{seed\_factory}}(\textcolor{keyword}{const} \mbox{\hyperlink{classbn_1_1seed__factory}{seed\_factory}} \& other) = \textcolor{keyword}{delete};}
\DoxyCodeLine{78         \mbox{\hyperlink{classbn_1_1seed__factory}{seed\_factory}} \& operator = (\textcolor{keyword}{const} \mbox{\hyperlink{classbn_1_1seed__factory}{seed\_factory}} \& other) = \textcolor{keyword}{delete};}
\DoxyCodeLine{79 }
\DoxyCodeLine{80         uint get\_new () \{}
\DoxyCodeLine{81             BAYLIB\_ASSERT(next < seeds.size(),}
\DoxyCodeLine{82                           \textcolor{stringliteral}{"{}seed factory already produced "{}}}
\DoxyCodeLine{83                           \textcolor{stringliteral}{"{}the required number of seeds"{}},}
\DoxyCodeLine{84                           std::runtime\_error)}
\DoxyCodeLine{85 }
\DoxyCodeLine{86             \textcolor{keywordflow}{return} seeds[next++];}
\DoxyCodeLine{87         \}}
\DoxyCodeLine{88 }
\DoxyCodeLine{89     \textcolor{keyword}{private}:}
\DoxyCodeLine{90         std::vector<uint> seeds;}
\DoxyCodeLine{91         ulong next;}
\DoxyCodeLine{92     \};}
\DoxyCodeLine{93 \}}
\DoxyCodeLine{94 }
\DoxyCodeLine{95 \textcolor{preprocessor}{\#endif }\textcolor{comment}{//BAYLIB\_RANDOM\_GENERATOR\_HPP}}

\end{DoxyCode}
